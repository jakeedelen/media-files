  <properties>
  <version.wildfly.swarm>2016.9</version.wildfly.swarm>
</properties>

<dependencyManagement>
  <dependencies>
    <dependency>
      <groupId>org.wildfly.swarm</groupId>
      <artifactId>bom-all</artifactId>
      <version>${version.wildfly.swarm}</version>
      <scope>import</scope>
      <type>pom</type>
    </dependency>
  </dependencies>
</dependencyManagement>
  
  <build>
  <plugins>
    <plugin>
      <groupId>org.wildfly.swarm</groupId>
      <artifactId>wildfly-swarm-plugin</artifactId>
      <version>${version.wildfly.swarm}</version>
      <executions>
        <execution>
          <goals>
            <goal>package</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build>

<dependencies>
  <!-- Wildfly Swarm Fractions -->
  <dependency>
    <groupId>org.wildfly.swarm</groupId>
    <artifactId>microprofile</artifactId>
  </dependency>
</dependencies>

package com.mcnz.micro;



import javax.ws.rs.*;

@Path("/rps")
public class ScoreService {
	
	
	public ScoreService() {
		System.out.println("CREATED");
	}
	
	private static int wins, losses, ties;
	
	// { "wins":"5", "losses":"3", "ties": "0"}
	
	
	@GET
	@Path("/score")
	@Produces("application/json")
	public String getScore() {
		System.out.println("In get");
		String pattern = "{ \"wins\":\"%s\", \"losses\":\"%s\", \"ties\": \"%s\"}";
		return String.format(pattern,  wins, losses, ties);
		
	}
	
	
	// localhost:8080/restful-java/score?wins=2%losses=3@ties=15
	@PUT
	@Path("/score")
	@Produces("application/json")
	public String updateScore(@QueryParam("wins") int wins, 
							  @QueryParam("losses")	int losses, 
							  @QueryParam("ties")	int ties) {
		ScoreService.wins = wins;
		ScoreService.losses = losses;
		ScoreService.ties = ties;
		String pattern = "{ \"wins\":\"%s\", \"losses\":\"%s\", \"ties\": \"%s\"}";
		return String.format(pattern,  wins, losses, ties);
	
	}
	
	
	

	@POST @Path("/score/wins")@Produces("text/plain")
	public int increaseWins() {
		
		return ++wins;
	}
	@POST @Path("/score/ties")@Produces("text/plain")	
	public int increaseTies() {
		return ++ties;
	}
	@POST @Path("/score/losses")@Produces("text/plain")		
	public int increaseLosses() {
		return ++losses;
	}
	
	@GET @Path("/score/wins")@Produces("text/plain")
	public int getWins() {
		System.out.println("In get  wins");
		return wins;
	}
	@GET @Path("/score/losses")@Produces("text/plain")
	public int getLosses() {
		return losses;
	}
	@GET @Path("/score/ties")@Produces("text/plain")
	public int getTies() {
		return ties;
	}

}


package com.mcnz.micro;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.Response;

@Path("/")
public class HelloWorldEndpoint {

  @GET
  @Path("/hello")
  @Produces("text/plain")
  public Response doGet() {
    return Response.ok("Hello from WildFly Swarm!").build();
  }
}
